<!DOCTYPE html>
<html>
<head>
    <title>Forager</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="header-container">
        <img src="/images/0.jpg" alt="Mushroom" class="header-icon" />
        <h1 class="fungi-title">Forager</h1>
        <img src="/images/0.jpg" alt="Mushroom" class="header-icon" />
    </div>

    <div class="game-section flex-game">
        <!-- Game Board -->
        <div>
            <div class="icon-group">
                <button class="icon-btn" onclick="showModal('instructionsModal')" aria-label="Instructions">
                    <svg class="help-icon" viewBox="0 0 24 24" width="32" height="32" fill="currentColor" aria-hidden="true">
                        <circle cx="12" cy="12" r="10" fill="#e8f4f8" />
                        <text x="12" y="16" text-anchor="middle" font-size="14" font-family="Arial" fill="#007cba" font-weight="bold">?</text>
                    </svg>
                </button>
                <button class="icon-btn" onclick="showSettings()" aria-label="Settings">
                    <svg class="cog-icon" viewBox="0 0 24 24" width="32" height="32" fill="currentColor" aria-hidden="true">
                        <path d="M12 15.5A3.5 3.5 0 1 1 12 8.5a3.5 3.5 0 0 1 0 7zm7.43-2.06l1.77-1.02a.5.5 0 0 0 .18-.68l-1.68-2.91a.5.5 0 0 0-.61-.22l-2.08.83a7.03 7.03 0 0 0-1.52-.88l-.32-2.22a.5.5 0 0 0-.5-.42h-3.36a.5.5 0 0 0-.5.42l-.32 2.22a7.03 7.03 0 0 0-1.52.88l-2.08-.83a.5.5 0 0 0-.61.22l-1.68 2.91a.5.5 0 0 0 .18.68l1.77 1.02c-.04.32-.07.65-.07.98s.03.66.07.98l-1.77 1.02a.5.5 0 0 0-.18.68l1.68 2.91c.13.23.39.31.61.22l2.08-.83c.47.34.98.63 1.52.88l.32 2.22c.05.24.26.42.5.42h3.36c.24 0 .45-.18.5-.42l.32-2.22c.54-.25 1.05-.54 1.52-.88l2.08.83c.22.09.48.01.61-.22l1.68-2.91a.5.5 0 0 0-.18-.68l-1.77-1.02c.04-.32.07-.65.07-.98s-.03-.66-.07-.98z" />
                    </svg>
                </button>
            </div>
            <div id="boardDisplay"></div>
            <div>
                <button class="primary-btn" onclick="startNewGame()">New Game</button>
                <button class="primary-btn" onclick="resetGame()">Reset</button>
            </div>
        </div>

        <!-- Game Display Section -->
        <div id="gameDisplay">
            <!-- Game Info -->
            <div id="gameInfo" class="game-section game-info">
                <h3>Game Status</h3>
                <p><strong># Mushrooms found:</strong> <span id="numShroomsFound"></span></p>
                <p><strong>Steps:</strong> <span id="currentDistance"></span></p>
                <p><strong>Goal:</strong> <span id="targetDistance"></span></p>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Game Settings</h2>

            <label for="fieldSize">Field Size:</label>
            <input type="number" id="fieldSize" min="3" max="15">
            <p><small>How many cells wide is the field? (3-15)</small></p>

            <label for="numShrooms">Number of Mushrooms:</label>
            <input type="number" id="numShrooms" min="3" max="15">
            <p><small>How many mushrooms are there in the field? (3-15)</small></p>

            <label for="pcStone">Stoniness:</label>
            <input type="number" id="pcStone" min="0" max="25">
            <p><small>What percentage of the field is stone wall? (0-25)</small></p>

            <label for="pcWoods">Woodiness:</label>
            <input type="number" id="pcWoods" min="0" max="25">
            <p><small>What percentage of the field is woods? (0-25)</small></p>

            <button class="primary-btn" onclick="saveSettings()">Save Settings</button>
            <button class="primary-btn" onclick="hideModal('settingsModal')">Cancel</button>
        </div>
    </div>

    <!-- Instructions Modal -->
    <div id="instructionsModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>How to Play Forager</h2>
            <p>
                Welcome to Forager!<br>
                <ul>
                    <li>Click on a mushroom to go and collect it.</li>
                    <li>Collect all the mushrooms and return to the start in as few steps as possible.</li>
                    <li>Stone blocks your way; grass takes 1 step; woods take 2 steps.</li>
                    <li>Your total steps is shown on the right.</li>
                    <li>Complete the field without going over the target steps.</li>
                </ul>
            </p>
            <button class="primary-btn" onclick="hideModal('instructionsModal')">Close</button>
        </div>
    </div>

    <!-- Win Modal -->
    <div id="winModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Congratulations</h2>
            <p>Efficient foraging! You beat the target.</p>
            <button class="primary-btn" onclick="hideModal('winModal')">Close</button>
        </div>
    </div>

    <!-- Too Few Modal -->
    <div id="tooFewModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Uh oh!</h2>
            <p>You didn't collect all the mushrooms. Click Reset to try again.</p>
            <button class="primary-btn" onclick="hideModal('tooFewModal')">Close</button>
        </div>
    </div>

    <!-- Too Far Modal -->
    <div id="tooFarModal" class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <h2>Uh oh!</h2>
            <p>There's a faster route. Click Reset to try again.</p>
            <button class="primary-btn" onclick="hideModal('tooFarModal')">Close</button>
        </div>
    </div>

    <!-- Messages -->
    <div id="messages" class="game-section" style="display: none;">
        <h3>Messages</h3>
        <div id="messageContent"></div>
    </div>

    <script src="game.js"></script>

</body>
</html>